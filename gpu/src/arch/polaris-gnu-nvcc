INSTALL = ../../my_pyscf/gpu

PYTHON_INC=$(shell python -m pybind11 --includes)

FC = ftn
FCFLAGS = -g -fopenmp -O3

CXX = CC
CXXFLAGS = -g -fPIC -fopenmp -O3
CXXFLAGS += -I$(NVIDIA_PATH)/cuda/include
CXXFLAGS += $(PYTHON_INC)

CXXFLAGS += -D_USE_GPU -D_GPU_CUDA
CXXFLAGS += -I/soft/compilers/cudatoolkit/cuda-11.4.4/include
#CXXFLAGS += -D_SIMPLE_TIMER
CXXFLAGS += -D_CUDA_NVTX

CUDA_CXXFLAGS = $(PYTHON_INC)
CUDA_CXXFLAGS += -Xcompiler -fopenmp
#CUDA_CXXFLAGS += -shared -Xcompiler -fPIC 
CUDA_CXXFLAGS += -D_USE_GPU -D_GPU_CUDA
CUDA_CXXFLAGS += -I/soft/compilers/cudatoolkit/cuda-11.4.4/include
#CUDA_CXXFLAGS += -D_SIMPLE_TIMER
CUDA_CXXFLAGS += -D_CUDA_NVTX

LD = $(CXX)
LDFLAGS = -fopenmp 
LDFLAGS += -fPIC -shared

LIB = -lstdc++
LIB += -L/home/knight/soft/polaris/lapack/lib -llapack -lrefblas -lgfortran
LIB += -L/soft/compilers/cudatoolkit/cuda-11.4.4/lib64 -lcublas
LIB += -lnvToolsExt
